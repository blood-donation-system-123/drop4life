<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Donor List - Drop4Life</title>

<style>
    body { 
        font-family: Arial; 
        background:#f7f7f7; 
        padding:20px; 
    }

    .search-box {
        background:white;
        padding:15px;
        border-radius:10px;
        width:90%;
        max-width:500px;
        margin:auto;
        box-shadow:0 0 10px #ccc;
    }

    input {
        width:100%;
        padding:10px;
        margin:10px 0;
        border-radius:5px;
        border:1px solid #aaa;
    }

    .card {
        background:white; 
        padding:15px; 
        margin:10px 0; 
        border-radius:10px;
        box-shadow:0 0 10px #ccc;
    }
</style>

</head>
<body>

<h2 style="text-align:center;">All Registered Donors</h2>

<div class="search-box">
    <input type="text" id="searchName" placeholder="Search by Name">
    <input type="text" id="searchCity" placeholder="Search by City">
    <input type="text" id="searchBlood" placeholder="Search by Blood Group (A+, O-, AB+...)">
</div>

<div id="donorList" style="margin-top:20px;"></div>

<script>

function loadDonors() {
    return JSON.parse(localStorage.getItem("drop4life_donors")) || [];
}

function displayDonors(list) {
    let container = document.getElementById("donorList");
    container.innerHTML = "";

    if (list.length === 0) {
        container.innerHTML = "<p>No donors found.</p>";
        return;
    }

    list.forEach(d => {
        container.innerHTML += `
            <div class="card">
                <b>Name:</b> ${d.name}<br>
                <b>Age:</b> ${d.age}<br>
                <b>Blood Group:</b> ${d.blood}<br>
                <b>City:</b> ${d.city}<br>
                <b>Phone:</b> ${d.phone}<br>
                <b>Status:</b> ${d.avail}
            </div>
        `;
    });
}

function filterDonors() {
    let donors = loadDonors();

    let name = document.getElementById("searchName").value.toLowerCase();
    let city = document.getElementById("searchCity").value.toLowerCase();
    let blood = document.getElementById("searchBlood").value.toUpperCase();

    let filtered = donors.filter(d => 
        d.name.toLowerCase().includes(name) &&
        d.city.includes(city) &&
        d.blood.includes(blood)
    );

    displayDonors(filtered);
}

document.getElementById("searchName").addEventListener("input", filterDonors);
document.getElementById("searchCity").addEventListener("input", filterDonors);
document.getElementById("searchBlood").addEventListener("input", filterDonors);

displayDonors(loadDonors());

</script>

</body>
</html>
